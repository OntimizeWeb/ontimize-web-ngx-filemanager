<div fxLayout="column">
  <o-file-input-extended #oFileInput attr="fileUpload" [service-type]="serviceType" max-file-size="10000" multiple="no" (onUploadFile)="onUploadedFile($event)"></o-file-input-extended>

  <div fxLayout="row" fxFill layout-padding class="filemanager-breadcrumb">
    <md-icon (click)="onGoToRootFolderClick()" class="breadcrumb-root">home</md-icon>
    <div *ngFor="let item of breadcrumbs; let i = index" (click)="onBreadcrumbItemClick(item.filter, i)" fxLayout="row" fxLayoutAlign="center center"
      class="breadcrumb-item">
      <md-icon color="accent">chevron_right</md-icon>
      <div class="breadcrumb-item-text">{{ item.item.name }}</div>
    </div>
  </div>

  <o-table-extended #oTable attr="filemanager" title="FILES" [service]="service" [service-type]="serviceType" [workspace-key]="workspaceKey"
    [parent-keys]="parentKeys" columns="id;name;size;created;directory" visible-columns="directory;name;size;created" show-table-buttons-text="no"
    insert-button="no" refresh-button="no" export-button="no" columns-visibility-button="no" pagination-controls="no" query-on-init="no"
    detail-mode="none" select-all-checkbox="yes" (onDoubleClick)="onTableDoubleClick($event)" [query-method]="queryMethod">

    <o-table-context-menu [context-menu]="tableContextMenu"></o-table-context-menu>

    <!-- <o-table-button icon="file_upload" (onClick)="onFileUploadClick()"></o-table-button> -->
    <o-table-button label="upload" icon="file_upload" (onClick)="onFileUploadClick()"></o-table-button>

    <o-table-column attr="directory" width="24px">
      <o-table-column-renderer-filetype></o-table-column-renderer-filetype>
    </o-table-column>
    <o-table-column attr="name" title="name"></o-table-column>
    <o-table-column attr="size" title="size"></o-table-column>
    <!-- format="LLL" -->
    <o-table-column attr="created" title="created" type="date" format="D/M/YYYY HH:mm:ss"></o-table-column>
  </o-table-extended>

  <o-context-menu #tableContextMenu>
    <o-context-menu-item icon="folder_open" [label]="openFolderLabel" [visible]="isDirectoryItem" (execute)="onOpenFolder($event)"></o-context-menu-item>
    <o-context-menu-item icon="file_download" [label]="downloadLabel" [visible]="cmShowDownloadOpt.bind(this)" (execute)="onDownloadFile()"></o-context-menu-item>
  </o-context-menu>

  <div class="upload-progress-container" fxLayout="row" fxLayoutAlign="end center" *ngIf="uploaderFiles">
    <div class="upload-progress-content mat-elevation-z4" fxLayout="row" fxLayoutAlign="center center" fxFlex="60">
      <md-icon class="close-icon" color="accent" *ngIf="!autoHideUpload" (click)="onCloseUploaderStatus()">close</md-icon>
      <md-list fxFlex [class.has-close-icon]="!autoHideUpload">
        <md-list-item *ngFor="let file of uploaderFiles">
          <span md-line>{{ file.name }}</span>
          <div fxLayout="row" fxLayoutAlign="start center" fxFlex="100">
            <md-progress-bar *ngIf="file.isUploading" color="accent" mode="determinate" [value]="file.progress" class="uploading"></md-progress-bar>
            <md-icon *ngIf="file.isUploaded && file.isSuccess" class="uploaded">check_circle</md-icon>
            <md-icon *ngIf="file.isUploaded && file.isError" class="error">error</md-icon>
          </div>
        </md-list-item>
      </md-list>
    </div>
  </div>
</div>
